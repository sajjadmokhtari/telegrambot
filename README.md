# 🤖 Telegram Subscription Bot

یک ربات تلگرام برای مدیریت اشتراک‌های VPN با قابلیت خرید خودکار، مدیریت پنل‌ها و سیستم شارژ.

## ✨ ویژگی‌ها

### 👤 کاربران
- 🛒 خرید اشتراک خودکار
- 📦 مشاهده اشتراک‌های فعال
- 👤 حساب کاربری با اطلاعات کامل
- ⚡ شارژ حساب با کارت به کارت
- 📊 نمایش مصرف حجم و زمان باقی‌مانده

### 👑 ادمین‌ها
- ➕ شارژ دستی کاربران
- 📄 مشاهده اطلاعات کامل کاربران
- ➕ افزودن/حذف سرویس‌ها
- ⚙️ مدیریت پنل‌ها
- 📢 اطلاع‌رسانی همگانی
- 📦 بکاپ هفتگی خودکار

## 🚀 نصب و راه‌اندازی

### پیش‌نیازها
- Go 1.19 یا بالاتر
- SQLite3
- دسترسی به API تلگرام

### 1. کلون کردن پروژه
```bash
git clone https://github.com/yourusername/telegram-subscription-bot.git
cd telegram-subscription-bot
```

### 2. نصب وابستگی‌ها
```bash
go mod tidy
```

### 3. تنظیم متغیرهای محیطی
فایل `.env` را در پوشه اصلی پروژه ایجاد کنید:

```env
BOT_TOKEN=your_telegram_bot_token
CARD_NUMBER=5859-8312-4246-5762
CARD_HOLDER=علی اسماعیلی
ADMIN_IDS=629590481,1150702474
```

### 4. اجرای ربات
```bash
go run main.go
```

## 📋 ساختار پروژه

```
telegrambot/
├── main.go          # فایل اصلی ربات
├── botdata.db       # دیتابیس SQLite
├── go.mod           # وابستگی‌های Go
├── go.sum           # checksum وابستگی‌ها
├── .env             # متغیرهای محیطی
└── README.md        # این فایل
```

## 🗄️ ساختار دیتابیس

### جدول `charges`
- `id`: شناسه یکتا
- `user_id`: آیدی کاربر تلگرام
- `amount`: مبلغ شارژ (مثبت یا منفی)
- `created_at`: تاریخ و زمان

### جدول `services`
- `id`: شناسه یکتا
- `name`: نام سرویس
- `description`: توضیحات
- `price`: قیمت (تومان)
- `days`: تعداد روز
- `gb`: حجم (گیگابایت)

### جدول `user_configs`
- `id`: شناسه یکتا
- `user_id`: آیدی کاربر
- `service_id`: شناسه سرویس
- `email`: ایمیل کانفیگ
- `sub_id`: شناسه اشتراک
- `config_link`: لینک کانفیگ
- `created_at`: تاریخ ایجاد

### جدول `panels`
- `id`: شناسه یکتا
- `panel_url`: آدرس پنل
- `cookie`: کوکی احراز هویت
- `config_middle`: بخش میانی کانفیگ
- `panel_id`: شناسه پنل
- `user_limit`: محدودیت کاربر
- `used_count`: تعداد کاربران استفاده شده

## 🔧 تنظیمات

### متغیرهای محیطی

| متغیر | توضیح | مثال |
|-------|-------|-------|
| `BOT_TOKEN` | توکن ربات تلگرام | `123456789:ABCdefGHIjklMNOpqrsTUVwxyz` |
| `CARD_NUMBER` | شماره کارت برای شارژ | `5859-8312-4246-5762` |
| `CARD_HOLDER` | نام صاحب کارت | `علی اسماعیلی` |
| `ADMIN_IDS` | آیدی ادمین‌ها (جدا شده با کاما) | `629590481,1150702474` |

## 📱 دستورات ربات

### دستورات کاربران
- `/start` - شروع ربات
- `🛒 خرید اشتراک` - خرید سرویس جدید
- `📦 اشتراک‌های من` - مشاهده اشتراک‌های فعال
- `👤 حساب کاربری` - اطلاعات حساب و مصرف
- `⚡ افزایش موجودی` - شارژ حساب

### دستورات ادمین
- `➕ شارژ دستی کاربر` - شارژ دستی کاربر
- `📄 اطلاعات کاربران` - مشاهده اطلاعات کاربران
- `➕ افزودن سرویس` - افزودن سرویس جدید
- `🗑 حذف سرویس` - حذف سرویس
- `📢 اطلاع رسانی همگانی` - ارسال پیام به همه کاربران
- `⚙️ افزودن پنل جدید` - افزودن پنل جدید
- `🗑 حذف پنل` - حذف پنل
- `📋 نمایش همه پنل‌ها` - مشاهده پنل‌ها

## 🔐 امنیت

- تمام اطلاعات حساس در متغیرهای محیطی ذخیره می‌شوند
- دیتابیس SQLite برای ذخیره‌سازی محلی
- احراز هویت ادمین‌ها بر اساس آیدی تلگرام
- بررسی خودکار ظرفیت پنل‌ها

## 📊 ویژگی‌های فنی

- **زبان**: Go
- **دیتابیس**: SQLite3
- **API**: Telegram Bot API
- **پنل‌ها**: پشتیبانی از پنل‌های مختلف
- **کانفیگ**: تولید خودکار کانفیگ VLESS
- **بکاپ**: بکاپ هفتگی خودکار

## 🤝 مشارکت

1. پروژه را Fork کنید
2. یک شاخه جدید ایجاد کنید (`git checkout -b feature/amazing-feature`)
3. تغییرات را Commit کنید (`git commit -m 'Add amazing feature'`)
4. به شاخه Push کنید (`git push origin feature/amazing-feature`)
5. یک Pull Request ایجاد کنید

## 📄 لایسنس

این پروژه تحت لایسنس MIT منتشر شده است. برای اطلاعات بیشتر فایل `LICENSE` را مطالعه کنید.

## 📞 پشتیبانی

برای گزارش باگ یا درخواست ویژگی جدید، لطفاً یک Issue ایجاد کنید.

---

**نکته**: این ربات برای استفاده شخصی و آموزشی طراحی شده است. لطفاً قوانین محلی را رعایت کنید. 